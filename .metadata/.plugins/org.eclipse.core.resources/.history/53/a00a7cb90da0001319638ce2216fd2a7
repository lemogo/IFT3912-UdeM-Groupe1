package DataBase;

import java.sql.*;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;

//import org.h2.tools.DeleteDbFiles;

import DataBase.Command.AbstractCommand;

/**
 * THis class handle all query connection to database by receiving command 
 * @author william
 * 
 */
public class DataBase {

	/**
	 * Constructor 
	 * 
	 * @throws ClassNotFoundException
	 * @throws SQLException
	 */
	
	public DataBase() {
		//TODO database constructor
	}

	/**
	 * méthode de connection à la base de donnée
	 */
	/**
	 * @return a boolean that is true when good connection established
	 */
	public boolean dbConnect() {

		boolean returnValue = false;
		//TODO connection DB
		
		return returnValue;
	}

	/**
	 * fermeture de la base de données
	 * 
	 * @throws SQLException
	 */
	public void dbClose()  {
		//TODO Close DB
	}

	/**
	 * delete data base
	 * 
	 * @throws SQLException
	 */
	public void dbDelete()  {
		//TODO Delete DB
		
	}

	/**
	 * @return un objet Statement
	 * @throws SQLException
	 */
	private Statement statement()  {
		Statement stat = null;
		//TODO statement connection to DB
		return stat;
	}

	/**
	 * Méthode pour créer des tables de la base de données
	 * 
	 * @throws SQLException
	 */
	public void createTable()  {
		//TODO Creation table
	}

	/**
	 * Méthod for insert data in database
	 * 
	 * @throws SQLException
	 */
	public void insertTable()  {
		//TODO inser data populate DB
		
	}

	/**
	 * execute a command with query .
	 * @param cmd la commande
	 * @return true if good connection or false when no connection.
	 * @throws SQLException
	 */
	public boolean execute(AbstractCommand cmd) {
		//TODO execute statement
			return false;
	}	
	
	
	
	  public static void main(String... args)  {
	        // delete the database named 'test' in the user home directory
	       /* 
		  DeleteDbFiles.execute("data/database", "dbgroup1", true);

	        Class.forName("org.h2.Driver");
	        //DataBase db = new DataBase();
	        Connection conn = DriverManager.getConnection( "jdbc:h2:data/database/dbgroup1", "group1", "");

			
	        Statement stat = conn.createStatement();
	        
	        // this line would initialize the database
	        // from the SQL script file 'init.sql'
	        // stat.execute("runscript from 'init.sql'");

	        stat.execute("create table test(id int primary key, name varchar(255))");
	        stat.execute("insert into test values(1, 'Hello')");
	        ResultSet rs;
	        rs = stat.executeQuery("select * from test");
	        while (rs.next()) {
	            System.out.println(rs.getString("name"));
	        }
	        stat.close();
	        conn.close();
	        */
	    }

	/**
	 * connection to database
	 */
	private Connection con = null;
	/**
	 * restore database
	 */
	private String restoreScript = null;
	/**
	 * database name
	 */
	private String dbName = "dbgroup1";
	
	/**
	 * path database 
	 */
	private String dbpath = "jdbc:h2:data/database/dbgroup1";
	/**
	 * passeword de la base de données
	 */
	private final String dbPassword = "";
	/**
	 * passeword de la base de données
	 */
	private final String dbUserName = "group1";
	/**
	 * Contante d'état d'une transation réussite
	 */
	public static final int SUCCESSFUL = 0;
	/**
	 * constante d'état d'une transaction échouée
	 */
	public static final int FAILED = -1;
	/**
	 * constante de restauration de la base de donnée en cas de panne
	 */
	private static final String SCRIPT_RESTORE = "DbRestore.sql";

}
